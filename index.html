<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>新春おみくじイベント</title>
    <style>
      :root {
        --font-base: system-ui, "Hiragino Kaku Gothic ProN", "Yu Gothic", "Meiryo", sans-serif;
        --red: #cf2f2f;
        --deep-red: #a81f1f;
        --gold: #c9a14a;
        --gold-light: #f1d9a6;
        --red-soft: #ff6b6b;
        --peach: #ffe2cf;
        --cream: #fff7e6;
        --ink: #2a2420;
        --paper: #fffaf1;
        --shadow: 0 18px 40px rgba(154, 38, 38, 0.15);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: var(--font-base);
        color: var(--ink);
        background:
          radial-gradient(circle at 85% 10%, rgba(255, 246, 214, 0.95) 0%, rgba(201, 161, 74, 0.35) 35%, transparent 60%),
          radial-gradient(circle at 20% 0%, rgba(255, 226, 210, 0.9), transparent 55%),
          linear-gradient(160deg, #fff6e2 0%, #fff9f5 45%, #ffe3d7 100%);
        position: relative;
        overflow-x: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background-image:
          linear-gradient(
            45deg,
            rgba(255, 255, 255, 0.7) 25%,
            transparent 25%,
            transparent 75%,
            rgba(255, 255, 255, 0.7) 75%
          ),
          linear-gradient(
            45deg,
            rgba(255, 226, 210, 0.55) 25%,
            transparent 25%,
            transparent 75%,
            rgba(255, 226, 210, 0.55) 75%
          );
        background-size: 40px 40px;
        background-position: 0 0, 20px 20px;
        opacity: 0.35;
        pointer-events: none;
      }

      body::after {
        content: "";
        position: fixed;
        inset: 0;
        background-image:
          radial-gradient(circle, rgba(255, 255, 255, 0.9) 0 1.5px, transparent 2px),
          radial-gradient(circle, rgba(255, 239, 200, 0.8) 0 2px, transparent 3px),
          radial-gradient(circle, rgba(255, 255, 255, 0.7) 0 1px, transparent 2px);
        background-size: 120px 120px, 180px 180px, 140px 140px;
        background-position: 0 0, 60px 40px, 20px 90px;
        opacity: 0.6;
        pointer-events: none;
        animation: twinkle 6s ease-in-out infinite;
      }

      .app {
        position: relative;
        max-width: 560px;
        margin: 0 auto;
        padding: 24px 18px 40px;
        display: flex;
        flex-direction: column;
        gap: 18px;
        z-index: 0;
      }

      .app::before,
      .app::after {
        content: "";
        position: absolute;
        width: 140px;
        height: 140px;
        border-radius: 50%;
        background:
          radial-gradient(circle at 30% 30%, rgba(255, 189, 189, 0.9) 0 18px, transparent 19px),
          radial-gradient(circle at 70% 25%, rgba(255, 213, 195, 0.85) 0 16px, transparent 17px),
          radial-gradient(circle at 50% 70%, rgba(255, 235, 210, 0.9) 0 16px, transparent 17px),
          radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.85) 0 10px, transparent 11px);
        opacity: 0.75;
        pointer-events: none;
        z-index: 0;
      }

      .app::before {
        top: -20px;
        left: -30px;
      }

      .app::after {
        bottom: -30px;
        right: -20px;
      }

      .hero {
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(255, 243, 234, 0.95));
        border-radius: 20px;
        padding: 20px 18px;
        box-shadow: 0 20px 36px rgba(154, 38, 38, 0.18);
        text-align: center;
        border: 1px solid rgba(201, 161, 74, 0.55);
        outline: 2px solid rgba(207, 47, 47, 0.18);
        outline-offset: 6px;
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .hero::before {
        content: "";
        position: absolute;
        inset: 0;
        background:
          radial-gradient(circle at 15% 0%, rgba(255, 219, 190, 0.45), transparent 55%),
          radial-gradient(circle at 85% 20%, rgba(255, 186, 186, 0.35), transparent 55%),
          radial-gradient(circle at 50% 100%, rgba(201, 161, 74, 0.2), transparent 65%);
        z-index: 0;
        pointer-events: none;
      }

      .hero::after {
        content: "";
        position: absolute;
        left: 16px;
        right: 16px;
        bottom: 10px;
        height: 12px;
        background:
          linear-gradient(90deg, transparent 0 12%, rgba(201, 161, 74, 0.6) 12% 88%, transparent 88%),
          linear-gradient(90deg, transparent 0 16%, rgba(207, 47, 47, 0.55) 16% 84%, transparent 84%);
        background-size: 100% 4px, 100% 4px;
        background-repeat: no-repeat;
        background-position: 0 0, 0 6px;
        opacity: 0.8;
        z-index: 0;
        pointer-events: none;
      }

      .hero > * {
        position: relative;
        z-index: 1;
      }

      .hero__badge {
        display: inline-block;
        padding: 6px 14px;
        border-radius: 999px;
        background: linear-gradient(120deg, var(--red), var(--deep-red));
        color: #fff;
        font-size: 13px;
        letter-spacing: 0.08em;
        font-weight: 700;
        margin-bottom: 8px;
        border: 1px solid rgba(255, 255, 255, 0.45);
        box-shadow: 0 8px 16px rgba(207, 47, 47, 0.25);
      }

      .hero__title {
        font-size: 30px;
        margin: 4px 0 8px;
        font-weight: 800;
        color: #8b1c1c;
        text-shadow: 0 2px 0 rgba(255, 255, 255, 0.7);
        letter-spacing: 0.04em;
      }

      .hero__lead {
        margin: 0 auto 16px;
        line-height: 1.6;
        font-size: 15px;
        max-width: 28em;
        color: #5f514b;
      }

      .hero__image {
        width: 72px;
        max-width: 100%;
        height: auto;
        margin: 0 auto;
        display: block;
        filter: drop-shadow(0 6px 10px rgba(0, 0, 0, 0.12));
        animation: float 5s ease-in-out infinite;
      }

      .panel {
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(255, 245, 233, 0.94));
        border-radius: 18px;
        padding: 18px;
        border: 1px solid rgba(201, 161, 74, 0.55);
        box-shadow: 0 14px 28px rgba(201, 161, 74, 0.16);
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      .panel::before {
        content: "";
        position: absolute;
        inset: 0;
        background:
          radial-gradient(circle at 15% 20%, rgba(255, 255, 255, 0.85), transparent 55%),
          radial-gradient(circle at 85% 40%, rgba(255, 219, 190, 0.4), transparent 60%);
        opacity: 0.6;
        z-index: 0;
        pointer-events: none;
      }

      .panel > * {
        position: relative;
        z-index: 1;
      }

      .panel__note {
        margin: 0 0 16px;
        line-height: 1.6;
        font-size: 14px;
        font-weight: 600;
        color: #6b5a52;
      }

      .panel__actions {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .btn {
        appearance: none;
        border: none;
        border-radius: 14px;
        padding: 14px 18px;
        font-size: 16px;
        font-weight: 700;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.2s ease;
        letter-spacing: 0.04em;
      }

      .btn:active {
        transform: translateY(1px) scale(0.99);
      }

      .btn--primary {
        background: linear-gradient(120deg, var(--deep-red), var(--red-soft) 60%, var(--gold-light));
        color: #fff;
        border: 1px solid rgba(255, 255, 255, 0.45);
        box-shadow: 0 12px 24px rgba(207, 47, 47, 0.28);
      }

      .btn--ghost {
        background: rgba(255, 255, 255, 0.92);
        color: var(--deep-red);
        border: 1px solid rgba(207, 47, 47, 0.4);
        box-shadow: 0 10px 20px rgba(201, 161, 74, 0.12);
      }

      .result {
        background-color: #fffdf7;
        background-image:
          linear-gradient(90deg, rgba(207, 47, 47, 0.08) 0 1px, transparent 1px 8px),
          linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 245, 230, 0.9));
        background-size: 8px 100%, 100% 100%;
        background-repeat: repeat, no-repeat;
        border-radius: 20px;
        border: 2px solid var(--deep-red);
        padding: 20px 18px;
        box-shadow: 0 18px 36px rgba(154, 38, 38, 0.18);
        position: relative;
        overflow: hidden;
        transform: translateY(6px);
        opacity: 0;
        z-index: 1;
      }

      .result.is-visible {
        animation: reveal 0.6s ease forwards;
      }

      .result::before {
        content: "福";
        position: absolute;
        width: 42px;
        height: 42px;
        top: 14px;
        right: 14px;
        background: #c01616;
        color: #fff;
        font-weight: 800;
        display: grid;
        place-items: center;
        border-radius: 8px;
        box-shadow: 0 8px 16px rgba(192, 22, 22, 0.35);
        z-index: 2;
        pointer-events: none;
      }

      .result::after {
        content: "";
        position: absolute;
        width: 170px;
        height: 170px;
        right: -60px;
        bottom: -70px;
        background: radial-gradient(circle, rgba(201, 161, 74, 0.4), transparent 70%);
        z-index: 0;
        pointer-events: none;
      }

      .result > * {
        position: relative;
        z-index: 1;
      }

      .result__title {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 16px;
        color: #fff;
        display: inline-block;
        padding: 6px 14px;
        border-radius: 999px;
        background: linear-gradient(120deg, var(--deep-red), var(--red));
        box-shadow: 0 8px 16px rgba(207, 47, 47, 0.25);
      }

      .result__list {
        margin: 0;
        display: grid;
        gap: 12px;
      }

      .result__row {
        display: grid;
        grid-template-columns: 110px 1fr;
        gap: 10px;
        align-items: start;
        font-size: 14px;
      }

      .result__row dt {
        font-weight: 700;
        color: #7f1d1d;
        letter-spacing: 0.04em;
      }

      .result__row dd {
        margin: 0;
        font-weight: 600;
      }

      .result__type {
        font-size: 22px;
        color: var(--red);
        letter-spacing: 0.06em;
      }

      .footer {
        text-align: center;
        font-size: 12px;
        color: #7a6d66;
        position: relative;
        z-index: 1;
      }

      @keyframes reveal {
        0% {
          opacity: 0;
          transform: translateY(10px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.45;
        }
        50% {
          opacity: 0.75;
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-6px);
        }
      }

      @media (max-width: 480px) {
        .hero__title {
          font-size: 26px;
        }

        .hero__lead {
          font-size: 14px;
        }

        .app::before,
        .app::after {
          width: 100px;
          height: 100px;
          opacity: 0.6;
        }

        .result::before {
          width: 36px;
          height: 36px;
          font-size: 14px;
        }

        .result__row {
          grid-template-columns: 90px 1fr;
          font-size: 13px;
        }

        .btn {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <header class="hero">
        <div class="hero__badge">新春イベント</div>
        <h1 class="hero__title">おみくじ</h1>
        <p class="hero__lead">
          ボタンを押すだけで抽選が始まります。結果をスタッフが確認します。画面提示のご協力お願いいたします。
        </p>
        <img class="hero__image" src="suika-image" alt="縁起物のスイカのイラスト" />
      </header>

      <section class="panel">
        <p class="panel__note">
          1回タップで結果が表示されます。イベント中は何度でも引き直しOKです。
        </p>
        <div class="panel__actions">
          <button id="drawButton" class="btn btn--primary" type="button">おみくじを引く</button>
          <button id="retryButton" class="btn btn--ghost" type="button" hidden>もう一度引く</button>
        </div>
      </section>

      <section id="resultCard" class="result" aria-live="polite" hidden>
        <div class="result__title">抽選結果</div>
        <dl class="result__list">
          <div class="result__row">
            <dt>おみくじの種類</dt>
            <dd id="resultType" class="result__type">-</dd>
          </div>
          <div class="result__row">
            <dt>特典内容</dt>
            <dd id="resultBenefit">-</dd>
          </div>
          <div class="result__row">
            <dt>使用条件</dt>
            <dd id="resultCondition">-</dd>
          </div>
          <div class="result__row">
            <dt>有効期限</dt>
            <dd id="resultExpiry">-</dd>
          </div>
        </dl>
      </section>

      <div class="footer">画面を閉じるまで結果は保持されます。</div>
    </div>

    <script>
      const results = [
        {
          type: "小吉",
          benefit: "本日のポイント2倍",
          condition: "なし",
          expiry: "当日限り",
        },
        {
          type: "中吉",
          benefit: "本日のオプション1,000円引き",
          condition: "なし",
          expiry: "当日限り",
        },
        {
          type: "大吉",
          benefit: "60分コース以上の指名料引き",
          condition: "60分コース以上",
          expiry: "2月1日〜2月16日",
        },
        {
          type: "大大吉",
          benefit: "75分コース以上で2,000円引き",
          condition: "75分コース以上",
          expiry: "2月1日〜2月16日",
        },
      ];

      const drawButton = document.getElementById("drawButton");
      const retryButton = document.getElementById("retryButton");
      const resultCard = document.getElementById("resultCard");
      const resultType = document.getElementById("resultType");
      const resultBenefit = document.getElementById("resultBenefit");
      const resultCondition = document.getElementById("resultCondition");
      const resultExpiry = document.getElementById("resultExpiry");

      const drawOmikuji = () => {
        const roll = Math.random();
        let result;

        if (roll < 0.3) {
          result = results[0];
        } else if (roll < 0.4) {
          result = results[1];
        } else if (roll < 0.7) {
          result = results[2];
        } else {
          result = results[3];
        }

        renderResult(result);
      };

      const renderResult = (result) => {
        resultType.textContent = result.type;
        resultBenefit.textContent = result.benefit;
        resultCondition.textContent = result.condition;
        resultExpiry.textContent = result.expiry;

        resultCard.hidden = false;
        resultCard.classList.remove("is-visible");
        void resultCard.offsetWidth;
        resultCard.classList.add("is-visible");
        retryButton.hidden = false;
        resultCard.scrollIntoView({ behavior: "smooth", block: "center" });
      };

      drawButton.addEventListener("click", drawOmikuji);
      retryButton.addEventListener("click", drawOmikuji);

      // デバッグ用: Consoleで debugRolls(10000) を実行すると確率の偏りを確認できます。
      const debugRolls = (count = 10000) => {
        const tally = { "小吉": 0, "中吉": 0, "大吉": 0, "大大吉": 0 };
        for (let i = 0; i < count; i += 1) {
          const roll = Math.random();
          let result;
          if (roll < 0.3) result = results[0];
          else if (roll < 0.4) result = results[1];
          else if (roll < 0.7) result = results[2];
          else result = results[3];
          tally[result.type] += 1;
        }
        console.table(tally);
      };
    </script>
  </body>
</html>

